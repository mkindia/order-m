

<table class="table table-sm table-dark" id="ordertableid">
    <thead class="table-danger">
        <tr class="text-center">
            <th scope="col">Date </th>
            <th scope="col">Item</th>
            <th scope="col">Unit</th>
            <th scope="col">Status</th>
            <th scope="col">Balance</th>
        </tr>
    </thead>
    <tbody>
        {% for orders in order %}
     <tr class="text-center">
        <td>
            {{ orders.orderdate}}
        </td>
        <td>
            {% for it in item %}
            {% if it.id == orders.item_id %}
            {{ it.item_name }}
            {% endif %}
            {% endfor %}
        </td>
        <td>
            {{ orders.qty }} / {{orders.unit}}
        </td>
        <td>
            {{ orders.sent_cancel }} / {{orders.unit}}
        </td>
         <td id="unit" style="display:none;">
            {{orders.unit}}
        </td>
        <td id="obal">
            {{orders.balance}} / {{orders.unit}}
        </td>
        </tr>
        <tr>
            <td colspan="5" class="table-active">
                <div class="row g-0">
                    <div class="col-12">
                        {% for it in consignees %}
                        {% if it.id == orders.consignees_id %}
                        {% for party in partys %}
                        {% if party.id == it.party_id %}
                     <h class="badge  alert-primary" > {{ party.party }} /
                        {% endif %}
                        {% endfor%}
                        {% endif %}
                        {% endfor %}
                   
                        {% for it in consignees %}
                        {% if it.id == orders.consignees_id %}
                        {{ it.consignee }} </h>
                        {% endif %}
                        {% endfor %}
                        <h class="badge alert-dark">Price {{orders.item_price}}</h>
                    </div>

                </div>
            </td>
           
        </tr>
        {% endfor %}        
    </tbody>
    {% if filter == 'item_wise' %}
    <tbody class="table-light">
        <tr>
            <td></td>
            <td></td>
            <td></td>
            <td class="text-end">Balance</td>
           <td id="total" class="text-center bg-dark text-light">                
            
        </td>
        </tr>
        
    </tbody>
    <script>
$(function() {
        var TotalValue = 0;
        var unit='None'
        var row=document.getElementById("ordertableid");
        var tt=row.rows[1].getElementsByTagName("td");

           $('tr #unit').each(function() {
            unit = $(this).text();    
            });

            $("tr #obal").each(function(index,value){
           
          currentRow = parseFloat($(this).text());
          TotalValue += currentRow
        });
         document.getElementById('total').innerHTML = TotalValue + " / " + row.rows.length ;
 });
</script>
    {% endif %}
</table>


